# JSON比对工具 🚀

一个功能强大的JSON对象比对工具，支持可拖拽布局、业务模型分区、字体调节、本地缓存等高级功能。

## ✨ 核心特性

### 🔍 智能比对引擎
- **深度比较**: 支持嵌套对象和数组的递归比较
- **字段过滤**: 指定要忽略的字段，支持路径匹配
- **重要字段标注**: 突出显示关键业务字段
- **比对选项**: 忽略大小写、忽略空白字符
- **自动比对**: 输入内容变化时自动触发比对（防抖）

### 🎨 可视化展示
- **JSON树形展示**: 类似 it-tools.tech 的语法高亮风格
- **差异类型标识**: 
  - 🟢 相同字段：绿色背景
  - 🔴 差异字段：红色背景，显示 A→B 变化
  - 🟡 缺失字段：黄色背景，标注仅A或仅B
  - ⭐ 重要字段：加粗边框突出显示

### 📊 业务模型分区
- **自定义模型**: 将字段按业务逻辑分组展示
- **模型管理**: 列表式管理，支持编辑、删除、排序
- **模型缓存**: 自动保存到浏览器本地存储
- **分区展示**: 比对结果按模型分组，未匹配字段归入"其余字段"

### 🎛️ 灵活布局系统
- **拖拽排序**: 拖拽模块标题栏重新排列顺序
- **调整大小**: 拖拽边缘和角落调整模块尺寸
- **布局预设**: 自动/单列/双列/三列布局快速切换
- **展开收起**: 单独控制每个模块的展开状态
- **全屏模式**: Tab级别全屏查看，便于大数据分析

### 🎯 用户体验优化
- **字体调节**: 10-16px字体大小调节，实时预览
- **紧凑布局**: 最小化空白间隙，最大化数据展示
- **本地缓存**: 所有设置自动保存，下次访问恢复
- **响应式设计**: 适配桌面和移动设备

## 🛠️ 使用指南

### 基础操作

1. **输入JSON数据**
   ```json
   // JSON A
   {
     "user": {
       "id": "12345",
       "name": "张三",
       "email": "zhangsan@example.com"
     }
   }
   
   // JSON B  
   {
     "user": {
       "id": "12345", 
       "name": "张三丰",  // 修改了名字
       "email": "zhangsan@example.com"
     }
   }
   ```

2. **开始比对**
   - 点击"开始比对"按钮
   - 或输入内容后自动触发比对

3. **查看结果**
   - 📊 统计面板显示总体情况
   - 🏷️ Tab切换查看不同类型字段
   - 🔍 展开模块查看详细内容

### 高级功能

#### 字段过滤设置
```
// 过滤不需要比对的字段
id, timestamp, metadata.version, user.lastLogin
```

#### 重要字段标注
```
// 标注业务关键字段
user.name, user.email, order.status, payment.amount
```

#### 业务模型配置

**示例1: 电商订单模型**

**模型名称**: 用户信息  
**字段路径**: user.id, user.profile, user.preferences

**模型名称**: 订单信息  
**字段路径**: order, payment

**模型名称**: 商品信息  
**字段路径**: items, products

**模型名称**: 物流信息  
**字段路径**: shipping, delivery

---

**示例2: 用户管理模型**

**模型名称**: 基础信息  
**字段路径**: user.id, user.name, user.email

**模型名称**: 权限设置  
**字段路径**: permissions, roles, groups

**模型名称**: 安全设置  
**字段路径**: password, twoFactor, loginHistory

**模型名称**: 个人设置  
**字段路径**: preferences, settings, profile

---

**示例3: API响应模型**

**模型名称**: 响应元数据  
**字段路径**: status, timestamp, requestId

**模型名称**: 业务数据  
**字段路径**: data, result

**模型名称**: 分页信息  
**字段路径**: pagination, pageInfo

**模型名称**: 错误信息  
**字段路径**: errors, warnings, messages

---

**示例4: 配置文件模型**

**模型名称**: 数据库配置  
**字段路径**: database, redis, mongodb

**模型名称**: 服务配置  
**字段路径**: server, api, gateway

**模型名称**: 安全配置  
**字段路径**: auth, encryption, firewall

**模型名称**: 监控配置  
**字段路径**: logging, metrics, alerts

### 布局操作指南

#### 模块拖拽
- 🖱️ **拖拽排序**: 拖拽模块标题栏改变顺序
- 📏 **调整大小**: 拖拽右下角、底部、右侧边缘
- 🔄 **展开收起**: 点击标题栏的展开/收起按钮

#### 布局控制
- 📱 **布局预设**: 自动/1列/2列/3列快速切换
- 💾 **保存布局**: 手动保存当前布局配置
- 🔄 **重置布局**: 恢复默认布局设置
- 🔍 **全屏模式**: Tab级别全屏查看

#### 字体调节
- ➕ **放大字体**: 点击 + 号增大字体
- ➖ **缩小字体**: 点击 - 号减小字体  
- 🔄 **重置字体**: 恢复默认12px字体
- 📊 **实时显示**: 中间显示当前字体大小

## 📋 模型配置详解

### 配置格式

推荐使用文本格式配置模型：

```
模型名称1: 字段路径1, 字段路径2
模型名称2: 字段路径3, 字段路径4
```

**注意事项:**
- 模型名称不能包含双引号
- 字段路径用逗号分隔
- 支持换行分隔字段路径
- 忽略空行和注释行（以#或//开头）

### 匹配规则

- **完全匹配**: `user.name` 匹配 `user.name`
- **前缀匹配**: `user` 匹配 `user.name`、`user.profile.age` 等
- **大小写敏感**: `User` 和 `user` 是不同的路径
- **优先级**: 按模型定义顺序匹配，先匹配的优先

### 实际应用场景

#### 1. 用户信息系统

**基本信息**: user.id, user.name, user.email, user.phone  
**详细资料**: user.profile, user.address, user.company  
**账户设置**: user.settings, user.preferences, user.notifications  
**安全信息**: user.security, user.permissions, user.roles

#### 2. 电商订单系统

**订单基础**: order.id, order.number, order.status, order.createTime  
**客户信息**: customer, billing, contact  
**商品明细**: items, products, skus, variants  
**价格信息**: pricing, discount, tax, total  
**配送信息**: shipping, delivery, address, logistics

#### 3. API接口监控

**请求信息**: request, method, url, headers  
**响应数据**: response, data, result, payload  
**性能指标**: timing, duration, latency, size  
**错误处理**: errors, exceptions, warnings, status

## 🚀 快捷操作

### 键盘快捷键
- `Ctrl + Enter`: 快速开始比对
- `Escape`: 退出全屏模式
- `+`: 放大字体（焦点在结果区域时）
- `-`: 缩小字体（焦点在结果区域时）

### 鼠标操作
- **双击标题栏**: 快速展开/收起模块
- **滚轮**: 在模块内容区域滚动查看
- **拖拽**: 重新排列模块顺序
- **边缘拖拽**: 调整模块大小

## 📁 项目结构

```
jsonTool/
├── index.html          # 主页面文件
├── styles.css          # 样式定义（紧凑布局）
├── script.js           # 核心逻辑（比对+布局）
└── README.md           # 使用说明
```

## 🔧 技术实现

### 核心技术栈
- **纯前端**: HTML5 + CSS3 + ES6+
- **布局系统**: CSS Grid + Flexbox
- **拖拽功能**: HTML5 Drag & Drop API
- **本地存储**: localStorage API
- **事件处理**: 防抖、事件委托

### 性能优化
- **防抖比对**: 400ms防抖避免频繁触发
- **虚拟滚动**: 大数据量时优化渲染
- **增量更新**: 只更新变化的部分
- **内存管理**: 及时清理事件监听器

### 兼容性支持
- Chrome 60+ ✅
- Firefox 55+ ✅  
- Safari 12+ ✅
- Edge 79+ ✅

## 📖 最佳实践

### 1. 数据准备
- 确保JSON格式正确
- 使用格式化按钮整理格式
- 大文件建议分块比对

### 2. 模型设计
- 按业务逻辑分组字段
- 使用有意义的模型名称
- 优先级高的模型放前面
- 定期维护模型配置

### 3. 布局优化
- 重要模块放在显眼位置
- 调整模块大小适应内容
- 使用全屏模式分析大数据
- 保存常用布局配置

### 4. 过滤策略
- 过滤时间戳等无关字段
- 过滤频繁变化的ID字段
- 标注核心业务字段
- 根据比对目的调整设置

## 🆕 版本更新

### v3.4 (最新)
- ✅ 完善可拖拽布局系统
- ✅ 业务模型列表式管理
- ✅ 字体大小动态调节
- ✅ 紧凑布局优化，最小化空白
- ✅ 修复拖拽功能JavaScript错误
- ✅ 优化section-content高度对齐

### v3.0
- ✅ 新增业务模型分区功能
- ✅ 实现可拖拽调整布局
- ✅ 添加Tab级别全屏模式
- ✅ 支持本地缓存设置

### v2.0
- ✅ 自动比对功能（防抖）
- ✅ JSON树形展示优化
- ✅ 字段顺序保持原样
- ✅ 重要字段突出显示

### v1.0
- ✅ 基础JSON比对功能
- ✅ 字段过滤和标注
- ✅ 结果导出和复制
- ✅ 响应式设计

## 🤝 使用建议

1. **首次使用**: 建议先用示例数据熟悉功能
2. **大数据比对**: 建议使用过滤功能减少无关字段
3. **团队协作**: 可以导出模型配置在团队间共享
4. **定期维护**: 根据业务变化更新模型配置
5. **性能考虑**: 超大JSON建议分批比对

## 📞 技术支持

如遇到问题或有功能建议，请通过以下方式联系：
- 创建Issue描述问题
- 提供示例数据和操作步骤
- 说明期望的功能效果

---

**🎯 让JSON比对更智能、更高效、更直观！**